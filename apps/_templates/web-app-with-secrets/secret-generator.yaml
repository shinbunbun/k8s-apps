# KSOPS generator 定義
# ArgoCD repo-server が Kustomize ビルド時にこのファイルを読み取り、
# SOPS暗号化された Secret ファイルを復号して Kubernetes Secret を生成する
apiVersion: viaduct.ai/v1
kind: ksops
metadata:
  name: secret-generator
  annotations:
    config.kubernetes.io/function: |
      exec:
        path: ksops
files:
  - secrets/secret.enc.yaml
